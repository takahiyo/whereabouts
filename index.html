// Web: GET で取得、POST で保存。key ごとに保存。
function doGet(e){
  var key = (e.parameter.key || 'presence-board-default');
  var v = PropertiesService.getScriptProperties().getProperty(key) || '{}';
  return ContentService.createTextOutput(JSON.stringify({data: JSON.parse(v)}))
                       .setMimeType(ContentService.MimeType.JSON);
}
function doPost(e){
  var body = e.postData && e.postData.contents ? e.postData.contents : '{}';
  var json = JSON.parse(body);
  PropertiesService.getScriptProperties().setProperty(json.key || 'presence-board-default', JSON.stringify(json.data || {}));
  return ContentService.createTextOutput('ok');
}
